'use client';

import { FC, HTMLAttributes, useMemo } from 'react';
import { useWallets } from '@mysten/dapp-kit';
import NextImage from 'next/image';
import { twMerge } from 'tailwind-merge';

import ArrowIcon from '@/../public/images/arrow.svg?jsx';

import { WALLETS } from '@/utils/const';

export const TotalLogoutInstruction: FC<HTMLAttributes<HTMLDivElement>> = ({ className }) => {
  const wallets = useWallets();

  const suiWallet = useMemo(
    () => wallets.find(({ name }) => name === WALLETS.SuiWallet),
    [wallets]
  );

  return (
    <div
      className={twMerge(
        'space-y-5',
        className
      )}
    >
      <div className="flex items-end gap-4">
        <div className="flex items-center gap-4">
          1. Please open your SUI wallet in the panel with all extensions
          {
            suiWallet?.icon && (
              <NextImage
                className="mx-auto"
                src={suiWallet?.icon}
                alt="Sui wallet icon"
                width="32"
                height="32"
              />
            )
          }
        </div>
        <ArrowIcon
          className="mb-2"
          width={100}
          height={100}
        />
      </div>
      <div className="flex items-center gap-4">
        <div>
          2. Click on the
          {' '}
          <span className="underline">
            {location.hostname}
          </span>
          {' '}
          located at the top of the wallet app
        </div>
        <div
          className="flex items-center justify-between px-3 py-2 bg-hawkesBlue rounded-md w-[360px] pointer-events-none"
        >
          <div className="text-gray-90">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 77 26"
              className="h-7 text-gray-900"
            >
              <path
                fill="currentColor"
                fillRule="evenodd"
                d="M16.276 10.845v-.001L10.558 3.85a.5.5 0 0 0-.772 0L8.648 5.24c-.348.43-.757 1.144-1.033 1.996-.275.853-.418 1.848-.226 2.839.297 1.532 1.427 2.88 3.401 4 2.923 1.664 4.7 3.718 5.245 6.113.028.127.053.253.075.377l.024.147.094-.116a7.804 7.804 0 0 0 1.742-4.905 7.75 7.75 0 0 0-1.694-4.847Zm1.8-1.391h-.001l.025.031a10.101 10.101 0 0 1 2.242 6.36C20.342 21.455 15.788 26 10.17 26 4.554 26 0 21.454 0 15.846c0-2.408.84-4.62 2.242-6.36l.025-.031v-.001L9.889.134a.364.364 0 0 1 .564 0l7.622 9.32Zm-13.303.525-.682.834a7.747 7.747 0 0 0-1.72 4.879c0 4.3 3.492 7.787 7.8 7.787 1.228 0 2.39-.284 3.423-.789l.034-.016.004-.037c.069-.59.04-1.265-.12-1.95-.384-1.645-1.717-3.143-4.008-4.447-2.634-1.494-4.21-3.424-4.651-5.739a6.748 6.748 0 0 1-.06-.367l-.02-.155ZM43.714 2c.303 0 .565.104.78.31.22.207.333.46.333.754s-.113.547-.333.754a1.09 1.09 0 0 1-.78.31c-.302 0-.566-.103-.785-.31a1.01 1.01 0 0 1-.327-.754c0-.293.11-.546.326-.753.22-.207.484-.311.787-.311ZM30.613 8.3c.404.152.79.358 1.156.618v.001c.377.26.687.596.93 1.004.247.415.368.92.368 1.51 0 .683-.18 1.303-.538 1.856-.356.554-.876.992-1.554 1.314-.677.324-1.495.484-2.45.484-.89 0-1.666-.144-2.326-.434-.654-.29-1.173-.698-1.553-1.222a3.494 3.494 0 0 1-.637-1.823L24 11.495h1.745l.008.097c.038.444.187.804.44 1.089.264.285.596.5 1 .642.412.14.856.21 1.332.21.556 0 1.051-.09 1.488-.268.438-.182.78-.431 1.031-.747.248-.316.373-.684.373-1.11 0-.386-.108-.691-.315-.924a2.401 2.401 0 0 0-.862-.597 9.344 9.344 0 0 0-1.192-.415l-1.511-.432c-.97-.279-1.745-.679-2.32-1.204-.583-.533-.873-1.232-.873-2.086 0-.708.191-1.33.577-1.86.387-.532.906-.943 1.552-1.233.65-.295 1.368-.441 2.172-.441s1.522.144 2.154.435c.63.286 1.131.68 1.503 1.184.377.505.575 1.08.596 1.72l.004.109H31.26l-.01-.093a1.777 1.777 0 0 0-.829-1.34c-.49-.321-1.097-.485-1.824-.485-.532 0-.993.086-1.385.255-.389.17-.689.4-.904.69-.21.29-.315.617-.315.987 0 .31.073.57.215.786.152.22.344.403.58.551.241.148.495.27.76.368.269.095.516.172.74.231l1.246.336c.325.085.684.202 1.078.35ZM42.89 5.454h1.625v9.418H42.89V5.453Zm-3.353 6.91c.237-.35.36-.802.36-1.362V5.453h1.625v9.418h-1.625v-1.413c-.222.397-.535.74-.936 1.027v.001c-.478.339-1.076.505-1.788.505-.591 0-1.121-.13-1.586-.391-.469-.268-.834-.668-1.098-1.196-.265-.535-.395-1.201-.395-1.995V5.453h1.626v5.86c0 .65.181 1.158.535 1.534.358.377.813.566 1.374.566.333 0 .675-.085 1.026-.259.35-.17.643-.433.882-.79v-.002ZM24.418 17.09v.897h2.153V24h1.039v-6.012h2.155v-.897h-5.347Zm6.42 6.686c.37.218.81.328 1.32.328.378 0 .714-.058 1.009-.172.297-.117.543-.28.738-.49.198-.211.336-.457.412-.739l-.955-.172a1.084 1.084 0 0 1-.671.658 1.604 1.604 0 0 1-.523.081 1.53 1.53 0 0 1-.773-.189 1.318 1.318 0 0 1-.516-.556 1.909 1.909 0 0 1-.181-.813h3.683v-.358c0-.47-.063-.87-.189-1.198-.126-.33-.298-.599-.516-.806a2.058 2.058 0 0 0-.739-.455 2.54 2.54 0 0 0-.85-.145c-.481 0-.902.113-1.262.34a2.306 2.306 0 0 0-.836.948c-.198.405-.297.873-.297 1.404 0 .537.099 1.006.297 1.407.2.398.483.707.85.927Zm-.138-2.82c.012-.223.067-.43.166-.624.115-.223.276-.403.486-.54.211-.14.459-.209.742-.209.26 0 .488.06.681.179.196.119.348.282.456.489.108.205.162.44.162.705H30.7Zm8.493-.874-.914.162a1.085 1.085 0 0 0-.182-.334.901.901 0 0 0-.33-.26 1.197 1.197 0 0 0-.524-.1c-.285 0-.524.063-.715.192-.191.126-.287.289-.287.489 0 .173.065.312.193.418.128.106.335.192.62.26l.824.189c.476.11.832.28 1.066.51.234.228.35.526.35.893 0 .31-.09.587-.27.83-.177.24-.426.43-.745.567a2.759 2.759 0 0 1-1.103.206c-.58 0-1.054-.124-1.42-.372a1.569 1.569 0 0 1-.675-1.062l.975-.149c.06.255.185.447.374.577.19.128.435.193.74.193.33 0 .594-.069.792-.206.198-.14.297-.31.297-.51a.53.53 0 0 0-.182-.408c-.12-.11-.303-.193-.55-.25l-.877-.192c-.484-.11-.841-.285-1.073-.526-.23-.24-.344-.546-.344-.914 0-.306.085-.574.256-.803.171-.23.407-.408.709-.537.3-.13.646-.195 1.035-.195.56 0 1.001.121 1.323.364.321.24.534.563.637.968Zm3.44-.455v-.81H41.57v-1.241H40.56v1.241h-.759v.81h.76v3.06c0 .312.07.572.212.779.141.207.327.36.556.459.23.099.477.146.742.142a1.981 1.981 0 0 0 .655-.109l-.182-.833a9.29 9.29 0 0 1-.142.027c-.06.012-.131.017-.212.017a.907.907 0 0 1-.308-.05.457.457 0 0 1-.226-.2c-.058-.099-.087-.246-.087-.442v-2.85h1.062Zm1.934 1.295V24h-1.009v-5.182h.968v.844h.065a1.48 1.48 0 0 1 .56-.662c.256-.166.579-.25.968-.25.353 0 .662.075.928.223.265.147.47.365.617.655.146.29.22.649.22 1.076V24h-1.01v-3.174c0-.376-.097-.67-.293-.881-.196-.214-.465-.32-.806-.32-.234 0-.442.05-.624.151-.18.102-.323.25-.429.446a1.47 1.47 0 0 0-.155.701Zm5.393 2.854c.37.218.809.328 1.32.328.377 0 .713-.058 1.008-.172.297-.117.543-.28.739-.49a1.73 1.73 0 0 0 .411-.739l-.954-.172a1.086 1.086 0 0 1-.672.658 1.603 1.603 0 0 1-.523.081 1.53 1.53 0 0 1-.772-.189 1.317 1.317 0 0 1-.516-.556 1.907 1.907 0 0 1-.182-.813h3.683v-.358c0-.47-.063-.87-.189-1.198a2.14 2.14 0 0 0-.516-.806 2.06 2.06 0 0 0-.738-.455 2.54 2.54 0 0 0-.85-.145c-.482 0-.902.113-1.262.34a2.305 2.305 0 0 0-.837.948c-.198.405-.297.873-.297 1.404 0 .537.1 1.006.297 1.407.2.398.484.707.85.927Zm-.139-2.82c.012-.223.068-.43.166-.624.115-.223.277-.403.486-.54.211-.14.459-.209.742-.209.261 0 .488.06.682.179.195.119.347.282.455.489.108.205.162.44.162.705h-2.693Zm7.03-2.139v.81h-1.063v2.85c0 .196.03.343.088.442a.458.458 0 0 0 .226.2c.094.033.196.05.307.05.08 0 .151-.006.212-.017l.142-.027.182.833a1.981 1.981 0 0 1-.654.108 1.777 1.777 0 0 1-.743-.141 1.273 1.273 0 0 1-.556-.459c-.142-.207-.213-.467-.213-.78v-3.06h-.759v-.809h.76v-1.241h1.008v1.241h1.063Z"
                clipRule="evenodd"
              />
            </svg>
          </div>
          <div
            className="
              overflow-hidden outline-0 flex items-center py-1 px-2 gap-1 rounded-2xl
              font-medium border min-w-0 border-gray-400 text-blue-400 text-sm
            "
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="1em"
              height="1em"
              fill="none"
              viewBox="0 0 12 12"
              className="text-green-400"
            >
              <circle cx="6" cy="6" r="3" fill="currentColor" />
            </svg>
            <div className="overflow-hidden truncate">
              {location.hostname}
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="1em"
              height="1em"
              fill="none"
              viewBox="0 0 12 12"
            >
              <path
                stroke="currentColor"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="1.5"
                d="m3 4.5 3 3 3-3"
              />
            </svg>
          </div>
          <div className="flex items-center justify-center text-gray-400">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 24 24"
              className="h-6 w-6"
            >
              <path
                d="M11.112 21.05c-.677 0-1.195-.413-1.353-1.064l-.387-1.643-.281-.097-1.424.879c-.571.36-1.24.273-1.723-.21l-1.221-1.223c-.484-.483-.58-1.151-.211-1.713l.887-1.424-.096-.264-1.644-.387a1.359 1.359 0 0 1-1.063-1.353v-1.74a1.35 1.35 0 0 1 1.063-1.354l1.626-.395.106-.282-.888-1.424c-.37-.562-.273-1.221.21-1.713l1.223-1.23c.474-.476 1.142-.563 1.713-.212l1.424.88.3-.115.386-1.644c.158-.65.676-1.063 1.353-1.063h1.776c.677 0 1.195.413 1.353 1.063l.378 1.644.299.114 1.433-.879c.57-.351 1.23-.263 1.705.211l1.23 1.23c.483.493.571 1.152.211 1.714l-.896 1.424.114.282 1.626.395a1.35 1.35 0 0 1 1.063 1.353v1.74c0 .669-.422 1.196-1.063 1.354l-1.644.387-.105.264.896 1.424c.36.562.273 1.23-.21 1.713l-1.231 1.222c-.483.483-1.143.571-1.714.211l-1.433-.879-.28.097-.379 1.643c-.158.65-.676 1.064-1.353 1.064h-1.776Zm.14-1.371h1.495c.15 0 .229-.062.246-.202l.536-2.18a4.905 4.905 0 0 0 1.406-.58l1.917 1.178c.114.079.22.061.334-.044l1.028-1.037c.105-.097.105-.203.035-.326l-1.178-1.898a6 6 0 0 0 .572-1.406l2.188-.519c.132-.026.202-.105.202-.255v-1.468c0-.158-.061-.228-.202-.255l-2.18-.527c-.14-.571-.395-1.09-.562-1.415l1.169-1.898c.079-.132.079-.238-.027-.343l-1.037-1.02c-.114-.105-.202-.123-.342-.044L14.944 6.6a6.41 6.41 0 0 0-1.415-.57l-.536-2.198c-.017-.14-.097-.202-.246-.202h-1.494c-.15 0-.229.061-.255.202l-.518 2.18c-.528.15-1.064.369-1.442.58L7.14 5.44c-.132-.079-.229-.061-.334.044L5.76 6.504c-.097.105-.106.21-.027.343l1.17 1.898c-.159.325-.423.844-.563 1.415l-2.171.527c-.15.027-.202.097-.202.255v1.468c0 .15.061.229.202.255l2.18.519c.14.536.369 1.037.57 1.406l-1.177 1.898c-.07.123-.061.229.035.326l1.037 1.037c.106.105.22.123.326.044l1.916-1.178c.378.237.879.448 1.415.58l.527 2.18c.026.14.106.202.255.202ZM12 15.012a3.374 3.374 0 0 1-3.357-3.358c0-1.828 1.52-3.34 3.357-3.34 1.837 0 3.349 1.512 3.349 3.34 0 1.846-1.512 3.358-3.349 3.358Zm0-1.363c1.072 0 1.969-.905 1.969-1.995A1.99 1.99 0 0 0 12 9.677c-1.09 0-1.986.896-1.986 1.977 0 1.099.896 1.995 1.986 1.995Z"
              />
            </svg>
          </div>
        </div>
      </div>
      <div className="flex items-center gap-4">
        3. Click the "Disconnect App" button
        <div className="relative px-3 py-2 bg-hawkesBlue rounded-md pointer-events-none">
          <div
            className="
              overflow-hidden outline-0 flex items-center py-1 px-2 gap-1 rounded-2xl
              font-medium border min-w-0 border-gray-400 text-blue-400 text-sm
            "
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="1em"
              height="1em"
              fill="none"
              viewBox="0 0 12 12"
              className="text-green-400"
            >
              <circle cx="6" cy="6" r="3" fill="currentColor" />
            </svg>
            <div className="overflow-hidden truncate">
              {location.hostname}
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="1em"
              height="1em"
              fill="none"
              viewBox="0 0 12 12"
            >
              <path
                stroke="currentColor"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="1.5"
                d="m3 4.5 3 3 3-3"
              />
            </svg>
          </div>
          <div
            className="
              absolute bg-stone-800 rounded-md p-2 w-[160px] left-1/2 -translate-x-1/2 top-full
              after:contents-[''] after:absolute after:bottom-full after:left-1/2 after:-translate-x-1/2
              after:h-0 after:w-0 after:border-x-[8px] after:border-x-transparent after:border-b-[8px]
              after:border-b-stone-800
            "
          >
            <div className="flex items-center gap-2">
              <NextImage
                src={`${location.origin}/favicon.ico`}
                alt="App Icon"
                width={32}
                height={32}
              />
              <span className="text-xs">
                <div>
                  Connected to
                </div>
                <div className="font-semibold">
                  {location.hostname}
                </div>
              </span>
            </div>
            <div className="text-orange-600 text-xs text-center border-t mt-2 pt-2 border-stone-500">
              Disconnect App
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};
