# DynamoDB Tables

## DEPLOYED_TABLE: s3m-contracts-dev

This maps (deployer-address, package-name) to contract deployment data
-- status, deployment date, ticker name, path to the contract's zip
file on S3, etc.  The *package-name* is derived from the ticker name.

* Partition key: *address*
* Sort key: *package_name*

## ROLES_TABLE: s3m-roles-dev

This maps (address-package, package-role) to wallet addresses who have
a given role in the contract.  The *address-package* is in the format
`deployer-address::package-name` from the `DEPLOYED_TABLE`, and the
role is one of `[burn, mint, cashIn, freeze, pause]`.

* Partition key: *address_package*
* Sort key: *package_role*

### ROLES_INDEX: s3m-roles-by-address-index-dev

This is a global index on `ROLES_TABLE` on (wallet-address,
address-package).  This is used to find packages that a wallet address
has some kind of role in.

* Partition key: *role_address*
* Sort key: *address_package*

## ADDRESS_EVENTS_TABLE: s3m-address-events-dev

This maps (wallet-address, timestamp) to a list of events that
occurred mentioning that wallet address at a certain timestamp.

* Primary key: *address*
* Sort key: *event_timestamp*

## CONTRACT_EVENTS_TABLE: s3m-contracts-events-dev

This maps (address-package, timestamp) to a list of events were
generated by a package at a certain timestamp.

* Primary key: *address_package*
* Sort key: *event_timestamp*

## BALANCES_TABLE: s3m-balances-dev

This maps (wallet-address, address-package) to their token balance for that
token.

* Primary key: *address*
* Sort key: *address_package*

## LASTFETCH_TABLE: s3m-contracts-lastfetch-dev

This maps address-package to the last time we received events for that package.

* Primary key: *address_package*

## ALLOCATION_TABLE: s3m-allocation-dev

This maps (address-package, allocation-type) to the amount allocated
or minted (= unallocated) for that package, with a timestamp.

* Primary key: *address_package*
* Sort key: *allocation_type* (one of `[allocated, unallocated]`)
n
## RELATED_TABLE: s3m-related-dev

This maps (address-package, package-role) to a related role address.

* Primary key: *address_package*
* Sort key: *package_role*

## TXVOL_YEAR_TABLE: s3m-txvol-yyyy-dev
## TXVOL_YEARMONTH_TABLE: s3m-txvol-yyyymm-dev
## TXVOL_YEARMONTHDAY_TABLE: s3m-txvol-yyyymmdd-dev

These three tables map (address-package, period) to the number of tokens transferred or minted
in that time period.

The period is a year in the first table ('2024', etc.), a year and a month in the second
('2024-03', '2024-04', etc.), and a year, month, and day in the third ('2024-03-28',
'2024-03-29', etc.)

* Primary key: *address_package*
* Sort key: *period*

## HOLDINGS_TABLE: s3m-holdings-dev

This maps (address-package, period) to the number of account balances in each bucket on that
day.

* Primary key: *address_package*
* Sort key: *period*
